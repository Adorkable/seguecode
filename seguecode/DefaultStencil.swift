//
//  DefaultStencil.swift
//  seguecode
//
//  Created by Ian Grossberg on 8/21/15.
//  Copyright (c) 2015 Adorkable. All rights reserved.
//

import Cocoa

class DefaultStencil: NSObject {
    struct Keys
    {
        static let FileName = "FileName"
        static let ProjectName = "ProjectName"
        
        static let GeneratedOn = "GeneratedOn"
        
        static let ViewControllerName = "ViewControllerName"
        
        static let SegueCases = "SegueCases"
        struct SegueCase
        {
            static let Identifier = "Identifier"
            static let SourceIdentifier = "SourceIdentifier"
            static let DestinationIdentifier = "DestinationIdentifier"
            static let Value = "Value"
        }
        
        static let PerformFunctions = "PerformFunctions"
        struct PerformFunction
        {
            static let Identifier = "Identifier"
            static let SourceIdentifier = "SourceIdentifier"
            static let DestinationIdentifier = "DestinationIdentifier"
        }
    }
    
    static var separateFile : String {
        // TODO: wrap everything in ifs
        return "//\n" +
            "{% if \(Keys.FileName) %}" +
            "//  {{ \(Keys.FileName) }}\n" +
            "{% endif %}" +
            "{% if \(Keys.ProjectName) %}" +
            "//  {{ \(Keys.ProjectName) }}\n" +
            "{% endif %}" +
            "//\n" +
            "//  Generated by seguecode [http://bit.ly/1JqWiqR]" +
            "{% if \(Keys.GeneratedOn) %}" +
            " on {{ \(Keys.GeneratedOn) }}\n" +
            "{% endif %}" +
            // TODO: copywrite and company info
            "//\n" +
            "\n" +
            "import UIKit\n" +
            "\n" +
            "extension {{ \(Keys.ViewControllerName) }} {\n" +
            "{% if \(Keys.SegueCases) %}" +
            "\n" +
            "   struct Segues {\n" +
            "{% for segueCase in \(Keys.SegueCases) %}" +
            "       static let {{ segueCase.\(Keys.SegueCase.SourceIdentifier) }}{{ segueCase.\(Keys.SegueCase.Identifier) }}{{ segueCase.\(Keys.SegueCase.DestinationIdentifier) }} = Segue(identifier: \"{{ segueCase.\(Keys.SegueCase.Value) }}\")\n" +
            "{% endfor %}" +
            "   }\n" +
            "{% endif %}" +
            "{% if \(Keys.PerformFunctions) %}" +
            "{% for performFunction in \(Keys.PerformFunctions) %}" +
            "\n" +
            "   @IBAction func perform{{ performFunction.\(Keys.PerformFunction.SourceIdentifier) }}{{ performFunction.\(Keys.PerformFunction.Identifier) }}{{ performFunction.\(Keys.PerformFunction.DestinationIdentifier) }}(sender : AnyObject? = nil) {\n" +
            "       self.performSegue({{ \(Keys.ViewControllerName) }}.Segues.{{ performFunction.\(Keys.PerformFunction.SourceIdentifier) }}{{ performFunction.\(Keys.PerformFunction.Identifier) }}{{ performFunction.\(Keys.PerformFunction.DestinationIdentifier) }}, sender: sender)\n" +
            "   }\n" +
            "{% endfor %}" +
            "{% endif %}" +
        "}"
    }
}
